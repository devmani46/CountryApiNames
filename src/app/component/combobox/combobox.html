<div class="combobox-container fw-combobox">
  <div class="combobox-input">
    @if (searchable) {
      <input
        [ngModel]="searchText"
        (ngModelChange)="onInputChange($event)"
        [placeholder]="placeholder"
        (focus)="openDropdown()"
      />

    } @else {
      <div class="non-searchable" (click)="toggleDropdown()">
        {{ selected || placeholder }}
      </div>
    }

    <span class="arrow" (click)="toggleDropdown()">
      {{ isOpen ? '▲' : '▼' }}
    </span>
  </div>

  <ul
    class="combobox-options fw-listbox"
    [class.open]="isOpen"
    [class.closed]="!isOpen"
  >
    @for (option of filteredOptions; let i = $index; track option) {
      <li
        #optionItem
        (click)="selectOption(option)"
        [class.disabled]="isDisabled(option)"
        [class.highlighted]="i === highlightedIndex"
      >
        {{ option }}
      </li>
    }
  </ul>
</div>
